<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Netflix Access Hub</title>
    
    <!-- 1. TH∆Ø VI·ªÜN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: white; overflow-x: hidden; -webkit-tap-highlight-color: transparent; }
        
        .glass-panel {
            background: rgba(22, 22, 22, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transform: translate3d(0, 0, 0); 
            will-change: transform, opacity;
        }

        .animate-enter { animation: enter 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes enter { from { opacity: 0; transform: scale(0.98) translateY(5px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        
        .animate-pulse-slow { animation: pulse 8s ease-in-out infinite; will-change: opacity; }
        @keyframes pulse { 0%, 100% { opacity: .2; } 50% { opacity: .05; } }

        /* THANH CU·ªòN CHO KHUNG LINK */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }
    </style>
</head>
<body class="selection:bg-red-500/30">

    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const { useState, useEffect, memo, useLayoutEffect, useRef } = React;

        // --- C·∫§U H√åNH ---
        const EXPIRATION_MINUTES = 15;
        const DEMO_USER = 'admin';
        const DEMO_PASS = '2025';

        // --- UTILS ---
        const formatNumber = (num) => {
            try { return new Intl.NumberFormat('vi-VN').format(num); } catch { return "0"; }
        };

        const formatTime = (str) => {
            try {
                const d = new Date(str);
                if(isNaN(d.getTime())) return "V·ª´a xong";
                return `${d.getHours()}:${String(d.getMinutes()).padStart(2,'0')} - ${d.getDate()}/${d.getMonth()+1}`;
            } catch { return "V·ª´a xong"; }
        };

        // --- COMPONENTS ---
        const NetflixLogo = () => (
            <div className="w-10 h-10 md:w-12 md:h-12 rounded-[22%] relative overflow-hidden shadow-2xl border border-white/10 bg-black flex-shrink-0 group cursor-pointer transform-gpu">
                <img src="https://upload.wikimedia.org/wikipedia/commons/f/ff/Netflix-new-icon.png" className="w-full h-full object-cover relative z-10" />
                <div className="absolute inset-0 bg-gradient-to-br from-white/20 via-transparent to-transparent pointer-events-none z-20"></div>
            </div>
        );

        const Icon = ({ name, size = 24, className = "" }) => {
            try {
                const iconKey = name.split('-').map(part => part.charAt(0).toUpperCase() + part.slice(1)).join('');
                if (window.lucide && window.lucide.icons && window.lucide.icons[iconKey]) {
                    const iconData = window.lucide.icons[iconKey];
                    return (
                        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={`lucide lucide-${name} ${className}`}>
                            {iconData.map((child, index) => React.createElement(child[0], { ...child[1], key: index }))}
                        </svg>
                    );
                }
            } catch (e) {}
            return <i className={className} style={{width: size, height: size}}></i>;
        };

        // --- EVENT COMPONENTS ---
        const calculateTimeLeft = (targetDate) => {
            const diff = +new Date(targetDate) - +new Date();
            if (diff > 0) {
                return {
                    days: Math.floor(diff / (1000 * 60 * 60 * 24)),
                    hours: Math.floor((diff / (1000 * 60 * 60)) % 24),
                    minutes: Math.floor((diff / 1000 / 60) % 60),
                    seconds: Math.floor((diff / 1000) % 60)
                };
            }
            return { days: 0, hours: 0, minutes: 0, seconds: 0 };
        };

        const CountdownTimer = ({ targetDate, isHero }) => {
            const [timeLeft, setTimeLeft] = useState(() => calculateTimeLeft(targetDate));

            useEffect(() => {
                const timer = setInterval(() => {
                    setTimeLeft(calculateTimeLeft(targetDate));
                }, 1000);
                return () => clearInterval(timer);
            }, [targetDate]);

            if (isHero) {
                return (
                   <div className="flex gap-3 justify-center md:justify-start">
                      {[{v:timeLeft.days,l:'Ng√†y'},{v:timeLeft.hours,l:'Gi·ªù'},{v:timeLeft.minutes,l:'Ph√∫t'},{v:timeLeft.seconds,l:'Gi√¢y'}].map((t, i) => (
                          <div key={i} className="flex flex-col items-center bg-black/40 border border-white/10 rounded-xl p-3 min-w-[60px]">
                              <span className="text-xl font-mono font-bold text-white">{t.v}</span>
                              <span className="text-[9px] uppercase text-white/40 mt-1">{t.l}</span>
                          </div>
                      ))}
                   </div>
                );
            }
            return (
                <div className="text-right">
                    <p className="text-[10px] text-white/40 font-bold uppercase tracking-wider mb-1">ƒê·∫øm ng∆∞·ª£c</p>
                    <div className="flex items-baseline gap-1 justify-end"><span className="text-3xl font-bold text-white font-[JetBrains Mono] tracking-tighter">{timeLeft.days}</span><span className="text-xs text-white/50 font-medium">ng√†y</span></div>
                    <div className="text-xs text-white/30 font-mono mt-1">{String(timeLeft.hours).padStart(2,'0')}:{String(timeLeft.minutes).padStart(2,'0')}:{String(timeLeft.seconds).padStart(2,'0')}</div>
                </div>
            );
        };

        const EventCard = memo(({ event, isHero }) => {
            return isHero ? (
                <div className="col-span-1 md:col-span-2 relative overflow-hidden rounded-[32px] p-8 group border border-white/10 bg-[#111]">
                    <div className={`absolute inset-0 bg-gradient-to-br ${event.color} opacity-20 group-hover:opacity-30 transition-opacity duration-1000`}></div>
                    <div className="relative z-10 flex flex-col md:flex-row items-center md:items-start gap-6">
                       <div className="p-5 bg-white/5 rounded-2xl backdrop-blur-md border border-white/10 shadow-xl text-white"><Icon name={event.iconStr} size={48} /></div>
                       <div className="flex-1 text-center md:text-left">
                           <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold uppercase tracking-widest text-white/60 mb-3"><Icon name="star" size={10} /> S·ª± ki·ªán n·ªïi b·∫≠t</div>
                           <h2 className="text-3xl md:text-4xl font-bold text-white mb-2 leading-tight">{event.name}</h2>
                           <p className="text-white/50 text-sm mb-6">{event.desc}</p>
                           <CountdownTimer targetDate={event.date} isHero={true} />
                       </div>
                    </div>
                </div>
            ) : (
                <div className="glass-panel rounded-3xl p-5 flex flex-col relative overflow-hidden group hover:border-white/20 transition-all duration-300 h-full">
                    <div className={`absolute -right-10 -top-10 w-32 h-32 bg-gradient-to-br ${event.color} opacity-10 blur-3xl group-hover:opacity-20 transition-opacity`}></div>
                    <div className="flex items-start justify-between mb-6 relative z-10">
                        <div className={`p-3 rounded-2xl bg-gradient-to-br ${event.color} text-white shadow-lg`}><Icon name={event.iconStr} size={24} /></div>
                        <CountdownTimer targetDate={event.date} isHero={false} />
                    </div>
                    <div className="mt-auto relative z-10">
                        <h3 className="text-xl font-bold text-white mb-1 truncate">{event.name}</h3>
                        <div className="flex items-center gap-2 text-xs text-white/50 border-t border-white/5 pt-3 mt-3"><Icon name="calendar" size={12} /><span>{new Date(event.date).toLocaleDateString('vi-VN')}</span></div>
                    </div>
                </div>
            );
        });

        const InstaPost = memo(({ avatar, username, location, image, caption, likes, time, onLike, isLiked }) => (
            <div className="glass-panel mb-8 w-full max-w-md mx-auto !rounded-[24px] overflow-hidden bg-[#121212]/90 border border-white/10 transform-gpu">
                <div className="flex items-center justify-between p-4 border-b border-white/5">
                    <div className="flex items-center gap-3">
                        <div className="w-10 h-10 rounded-full bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500 p-[2px]">
                            <img src={avatar} className="w-full h-full rounded-full border-2 border-[#121212] object-cover" />
                        </div>
                        <div className="leading-tight">
                            <div className="text-sm font-bold text-white flex items-center gap-1">{username} <Icon name="check-circle-2" size={12} className="text-blue-500 fill-blue-500/20" /></div>
                            <div className="text-xs text-white/50">{location}</div>
                        </div>
                    </div>
                    <Icon name="more-horizontal" className="text-white/60" />
                </div>
                <div className="relative aspect-[4/5] w-full bg-gray-900 overflow-hidden cursor-pointer group" onDoubleClick={onLike}>
                   <img src={image} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" />
                   <div className={`absolute inset-0 flex items-center justify-center pointer-events-none transition-all duration-300 transform ${isLiked ? 'opacity-0 scale-110' : 'opacity-0 scale-90'}`}>
                        <Icon name="heart" size={100} className="text-white fill-white drop-shadow-2xl" />
                   </div>
                </div>
                <div className="p-4">
                    <div className="flex justify-between items-center mb-4">
                        <div className="flex gap-5">
                            <button onClick={onLike} className="transition-transform active:scale-75 hover:opacity-80">
                                <Icon name="heart" size={28} className={isLiked ? "text-red-500 fill-red-500" : "text-white"} />
                            </button>
                            <Icon name="message-circle" size={28} className="text-white hover:opacity-70 cursor-pointer" />
                            <Icon name="send" size={28} className="text-white hover:opacity-70 cursor-pointer" />
                        </div>
                        <Icon name="bookmark" size={28} className="text-white hover:opacity-70 cursor-pointer" />
                    </div>
                    <div className="text-sm font-bold text-white mb-2">{formatNumber(likes)} l∆∞·ª£t th√≠ch</div>
                    <div className="text-sm text-white mb-2 leading-relaxed"><span className="font-bold mr-2">{username}</span><span className="text-white/90 whitespace-pre-line" dangerouslySetInnerHTML={{ __html: caption }}></span></div>
                    <div className="text-white/30 text-[10px] uppercase tracking-wide font-medium">{time}</div>
                </div>
            </div>
        ));

        // --- MAIN APP ---
        const App = () => {
            const [view, setView] = useState(() => {
                return localStorage.getItem('netflix_auth_token') === 'true' ? 'app' : 'login';
            });
            
            const [activeTab, setActiveTab] = useState('dashboard');
            
            const [toast, setToast] = useState(null);
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [isAuthenticating, setIsAuthenticating] = useState(false);
            
            const [data, setData] = useState({ verificationLink: '', type: 'waiting', updatedAt: new Date().toISOString() });
            const [isDataLoaded, setIsDataLoaded] = useState(false);
            const [dbInstance, setDbInstance] = useState(null);
            
            // State th·ªùi gian th·ª±c
            const [now, setNow] = useState(Date.now());
            const previousExpiredState = useRef(false);
            const isNotificationBlocked = useRef(false); // CH·∫∂N TH√îNG B√ÅO LOGIN

            // --- AUTO UPDATE CLOCK ---
            useEffect(() => {
                const timer = setInterval(() => {
                    setNow(Date.now());
                }, 1000);
                return () => clearInterval(timer);
            }, []);

            // --- AUTO SCROLL TOP FIX ---
            useLayoutEffect(() => {
                window.scrollTo({ top: 0, left: 0, behavior: 'instant' });
            }, [view, activeTab]);

            // --- ROUTING LOGIC (SPA) ---
            useEffect(() => {
                const handleRouting = () => {
                    const isAuth = localStorage.getItem('netflix_auth_token') === 'true';
                    let hash = window.location.hash.replace('#', '');
                    if (hash === 'event') hash = 'events';
                    const validTabs = ['dashboard', 'events', 'blog'];

                    if (isAuth) {
                        if (view !== 'app') setView('app');
                        if (hash === 'login' || hash === '') window.location.hash = 'dashboard';
                        else if (validTabs.includes(hash) && activeTab !== hash) setActiveTab(hash);
                    } else {
                        if (view !== 'login') setView('login');
                        if (validTabs.includes(hash)) window.location.hash = 'login';
                    }
                };

                window.addEventListener('hashchange', handleRouting);
                handleRouting(); 
                return () => window.removeEventListener('hashchange', handleRouting);
            }, [view, activeTab]);

            const navigateTo = (tabName) => {
                window.location.hash = tabName;
                setActiveTab(tabName);
            };

            // BLOG DATA
            const AVATAR_URL = "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/240527_Aespa_Ningning.jpg/640px-240527_Aespa_Ningning.jpg";
            const [posts, setPosts] = useState([
                { 
                    id: 1, avatar: AVATAR_URL, username: "fanboi.n1ngn1ng", location: "Dreaming of You üåå", 
                    image: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f4/Aespa%27s_Ningning_4.jpg/600px-Aespa%27s_Ningning_4.jpg", 
                    caption: "Ng∆∞·ªùi ta n√≥i u·ªëng r∆∞·ª£u m·ªõi say, c√≤n t√¥i ch·ªâ c·∫ßn nh√¨n v√†o √°nh m·∫Øt ·∫•y l√† ƒë·ªß l·∫°c l·ªëi c·∫£ m·ªôt ƒë·ªùi... ü•Äüñ§<br/><br/>#ningning #aespa #my_muse #si_tinh", likes: 360291, time: "2 GI·ªú TR∆Ø·ªöC", isLiked: true 
                },
                { 
                    id: 2, avatar: AVATAR_URL, username: "fanboi.n1ngn1ng", location: "In My Heart ‚ù§Ô∏è‚Äçüî•", 
                    image: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/2023_MMA_aespa_Ningning_1.jpg/409px-2023_MMA_aespa_Ningning_1.jpg", 
                    caption: "Th√†nh ph·ªë n√†y r·ªông l·ªõn ƒë·∫øn th·∫ø, nh∆∞ng t√¨m m·ªôt ng∆∞·ªùi ƒë·ªÉ n·∫Øm tay ƒëi h·∫øt ƒëo·∫°n ƒë∆∞·ªùng sao kh√≥ qu√°... üåßÔ∏è<br/><br/>Ch·ªâ c√≤n l·∫°i m√¨nh ta v·ªõi ƒë√™m th√¢u nh·ªõ v·ªÅ em.", likes: 150432, time: "1 NG√ÄY TR∆Ø·ªöC", isLiked: false 
                },
                { 
                    id: 3, avatar: AVATAR_URL, username: "fanboi.n1ngn1ng", location: "Seoul, Korea", 
                    image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Aespa_Ningning_2024_MMA.jpg/435px-Aespa_Ningning_2024_MMA.jpg", 
                    caption: "N·∫øu n·ªói nh·ªõ l√† nh·ªØng h·∫°t m∆∞a, anh ƒë√£ l√†m ∆∞·ªõt c·∫£ b·∫ßu tr·ªùi c·ªßa em r·ªìi ƒë·∫•y.<br/><br/>Nh·ªõ Ning th·∫≠t nhi·ªÅu... ‚ú®üåô #love #missingyou #ningning", likes: 289201, time: "2 NG√ÄY TR∆Ø·ªöC", isLiked: true 
                }
            ]);

            const UPCOMING_EVENTS = [
                { id: 1, name: "Gi√°ng Sinh 2025", date: "2025-12-25T00:00:00", iconStr: "gift", color: "from-green-500 to-emerald-700", desc: "Jingle bells..." },
                { id: 2, name: "T·∫øt D∆∞∆°ng L·ªãch", date: "2026-01-01T00:00:00", iconStr: "party-popper", color: "from-blue-500 to-indigo-700", desc: "Ch√†o ƒë√≥n nƒÉm m·ªõi" },
                { id: 3, name: "T·∫øt Nguy√™n ƒê√°n", date: "2026-02-17T00:00:00", iconStr: "moon", color: "from-red-500 to-orange-600", desc: "T·∫øt B√≠nh Ng·ªç" },
                { id: 4, name: "Valentine 2026", date: "2026-02-14T00:00:00", iconStr: "heart", color: "from-pink-500 to-rose-600", desc: "L·ªÖ t√¨nh nh√¢n" },
                { id: 5, name: "Qu·ªëc T·∫ø Ph·ª• N·ªØ", date: "2026-03-08T00:00:00", iconStr: "flower", color: "from-purple-500 to-fuchsia-600" },
                { id: 6, name: "Gi·ªó T·ªï H√πng V∆∞∆°ng", date: "2026-04-25T00:00:00", iconStr: "crown", color: "from-yellow-500 to-amber-600" }
            ];

            useEffect(() => {
                const firebaseConfig = {
                    databaseURL: "https://netflix-household-776de-default-rtdb.asia-southeast1.firebasedatabase.app/", 
                };
                try {
                    if (firebaseConfig.databaseURL && !firebaseConfig.databaseURL.includes("YOUR_PROJECT")) {
                        const app = initializeApp(firebaseConfig);
                        const database = getDatabase(app);
                        setDbInstance(database);
                    }
                } catch (e) { console.error("FB Error", e); }
            }, []);

            useEffect(() => {
                if (dbInstance && view === 'app') {
                    const safetyTimer = setTimeout(() => {
                        setIsDataLoaded(true);
                    }, 5000);

                    const dataRef = ref(dbInstance, 'netflix_data');
                    const unsubscribe = onValue(dataRef, (snapshot) => {
                        clearTimeout(safetyTimer);
                        setIsDataLoaded(true);
                        
                        if (snapshot.exists()) {
                            const val = snapshot.val();
                            setData({
                                verificationLink: val.verificationLink || '',
                                type: val.type || 'waiting',
                                updatedAt: val.updatedAt || new Date().toISOString()
                            });
                        }
                    }, (error) => {
                        clearTimeout(safetyTimer);
                        setIsDataLoaded(true);
                    });
                    
                    return () => {
                        clearTimeout(safetyTimer);
                        unsubscribe();
                    };
                }
            }, [dbInstance, view]);

            const showNotification = (type, msg) => {
                setToast({ type, msg });
                setTimeout(() => setToast(null), 3000);
            };

            const handleLogin = (e) => {
                e.preventDefault();
                setIsAuthenticating(true);
                setTimeout(() => {
                    if (username === DEMO_USER && password === DEMO_PASS) {
                        localStorage.setItem('netflix_auth_token', 'true');
                        // Reset notification state
                        previousExpiredState.current = false;
                        isNotificationBlocked.current = true; // Block expired msg for 4s
                        
                        window.location.hash = 'dashboard';
                        setView('app');
                        showNotification('success', 'ƒêƒÉng nh·∫≠p th√†nh c√¥ng');
                        
                        setTimeout(() => { isNotificationBlocked.current = false; }, 4000);

                    } else {
                        showNotification('error', 'Sai m·∫≠t kh·∫©u! (admin/2025)');
                    }
                    setIsAuthenticating(false);
                }, 1000);
            };
            
            const handleLogout = () => {
                localStorage.removeItem('netflix_auth_token');
                // Reset data
                setData({ verificationLink: '', type: 'waiting', updatedAt: new Date().toISOString() });
                setIsDataLoaded(false);
                previousExpiredState.current = false;
                
                window.location.hash = 'login';
                setView('login');
                showNotification('success', 'ƒê√£ ƒëƒÉng xu·∫•t');
            };

            const handleCopy = () => {
                const el = document.createElement('textarea');
                el.value = data.verificationLink;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                showNotification('success', 'ƒê√£ sao ch√©p li√™n k·∫øt!');
            };
            
            const handleLike = (id) => {
                setPosts(currentPosts => currentPosts.map(p => {
                    if (p.id === id) {
                        const newIsLiked = !p.isLiked;
                        return { 
                            ...p, 
                            isLiked: newIsLiked,
                            likes: p.likes + (newIsLiked ? 1 : -1)
                        };
                    }
                    return p;
                }));
            };

            // --- CHECK EXPIRED ---
            const isLinkExpired = (() => {
                try {
                    const diff = now - new Date(data.updatedAt).getTime();
                    return (diff / 1000 / 60) >= EXPIRATION_MINUTES;
                } catch { return true; }
            })();
            
            // --- NOTIFY EXPIRED ---
            useEffect(() => {
                if (data.type === 'link_ready' && isDataLoaded) {
                    if (isLinkExpired && !previousExpiredState.current) {
                        if (isNotificationBlocked.current) {
                             setTimeout(() => { showNotification('error', '‚ö†Ô∏è Link x√°c minh ƒë√£ h·∫øt h·∫°n!'); }, 4000);
                        } else {
                             showNotification('error', '‚ö†Ô∏è Link x√°c minh ƒë√£ h·∫øt h·∫°n!');
                        }
                    }
                    previousExpiredState.current = isLinkExpired;
                }
            }, [isLinkExpired, data.type, isDataLoaded]);

            const isLinkReady = data.type === 'link_ready' && !isLinkExpired;

            return (
                <div className="min-h-screen relative overflow-hidden">
                    <div className="fixed inset-0 z-0 pointer-events-none transform-gpu"><div className="absolute top-[-20%] right-[-10%] w-[60vw] h-[60vw] rounded-full bg-purple-900/20 blur-[120px] animate-pulse-slow"></div><div className="absolute bottom-[-10%] left-[-10%] w-[50vw] h-[50vw] rounded-full bg-red-900/10 blur-[120px] animate-pulse-slow"></div><div className="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div></div>
                    
                    {toast && <div className="fixed top-6 right-6 z-[100] animate-enter"><div className={`px-6 py-3 rounded-full flex items-center gap-3 shadow-2xl border bg-[#1a1a1a] ${toast.type==='error'?'border-red-500/30 text-red-400':'border-green-500/30 text-green-400'}`}><Icon name={toast.type==='error'?'alert-circle':'check-circle-2'} size={18} /><span className="text-sm font-medium text-white">{toast.msg}</span></div></div>}

                    {view === 'login' && (
                        <div className="min-h-screen flex items-center justify-center p-6 relative z-10 animate-enter">
                            <div className="glass-panel p-10 w-full max-w-md rounded-[32px]">
                                <div className="flex flex-col items-center mb-10"><NetflixLogo /><h1 className="text-2xl font-bold mt-6 text-white">Ch√†o m·ª´ng tr·ªü l·∫°i</h1><p className="text-white/40 text-sm mt-1">ƒêƒÉng nh·∫≠p ƒë·ªÉ qu·∫£n l√Ω h·ªá th·ªëng</p></div>
                                <form onSubmit={handleLogin} className="space-y-4">
                                    <div className="relative group"><div className="absolute left-4 top-3.5 text-white/30"><Icon name="user" size={18} /></div><input type="text" placeholder="T√™n ƒëƒÉng nh·∫≠p" value={username} onChange={e => setUsername(e.target.value)} className="w-full bg-black/40 border border-white/10 rounded-2xl py-3.5 pl-11 pr-4 text-white placeholder-white/20 focus:outline-none focus:border-white/30 transition-colors" /></div>
                                    <div className="relative group"><div className="absolute left-4 top-3.5 text-white/30"><Icon name="lock" size={18} /></div><input type="password" placeholder="M·∫≠t kh·∫©u" value={password} onChange={e => setPassword(e.target.value)} className="w-full bg-black/40 border border-white/10 rounded-2xl py-3.5 pl-11 pr-4 text-white placeholder-white/20 focus:outline-none focus:border-white/30 transition-colors" /></div>
                                    <button type="submit" disabled={isAuthenticating} className="w-full bg-white text-black font-bold py-4 rounded-2xl mt-4 hover:bg-gray-200 transition-all flex justify-center items-center gap-2 active:scale-[0.98]">{isAuthenticating ? <Icon name="loader-2" className="animate-spin" /> : "ƒêƒÉng nh·∫≠p"}</button>
                                </form>
                                <div className="mt-6 text-center text-xs text-white/20">Demo: admin / 2025</div>
                            </div>
                        </div>
                    )}

                    {view === 'app' && (
                        <div className="min-h-screen relative z-10 p-4 md:p-8 animate-enter">
                            <div className="max-w-7xl mx-auto">
                                <div className="flex flex-col md:flex-row items-center justify-between mb-8 gap-4 relative z-20">
                                    <div className="flex items-center justify-between w-full md:w-auto"><div className="flex items-center gap-4"><NetflixLogo /><div><h1 className="text-lg font-bold tracking-tight text-white">Access Hub</h1><div className="flex items-center gap-2 text-xs text-white/40"><span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span> Online</div></div></div><button onClick={handleLogout} className="md:hidden w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors"><Icon name="log-out" size={18} className="text-white/60" /></button></div>
                                    <div className="bg-white/5 p-1 rounded-full flex gap-1 border border-white/10">{['dashboard', 'events', 'blog'].map(tab => (<button key={tab} onClick={() => navigateTo(tab)} className={`px-6 py-2.5 rounded-full text-sm font-medium transition-all flex items-center gap-2 ${activeTab === tab ? 'bg-white text-black shadow-lg' : 'text-white/60 hover:text-white hover:bg-white/5'}`}><Icon name={tab === 'dashboard' ? 'terminal' : tab === 'events' ? 'calendar' : 'book-open'} size={16} /><span className="capitalize">{tab === 'dashboard' ? 'Trang ch·ªß' : tab === 'events' ? 'S·ª± ki·ªán' : 'Blog'}</span></button>))}</div><button onClick={handleLogout} className="hidden md:flex w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 items-center justify-center transition-colors"><Icon name="log-out" size={18} className="text-white/60" /></button>
                                </div>

                                {activeTab === 'dashboard' && (
                                    <div className="grid grid-cols-1 md:grid-cols-12 gap-6 animate-enter">
                                        
                                        {/* LEFT: INFO + GUIDE (VERTICAL FLEX) */}
                                        <div className="md:col-span-4 flex flex-col gap-6 h-full order-1 md:order-1">
                                            <div className="glass-panel p-6 rounded-[32px] h-full flex flex-col justify-between">
                                                <div>
                                                    <div className="flex items-center gap-3 mb-4 text-purple-400"><div className="p-2 bg-purple-500/10 rounded-lg"><Icon name="cpu" size={20} /></div><h2 className="font-bold text-lg text-white">Th√¥ng tin c√¥ng c·ª•</h2></div>
                                                    <div className="grid grid-cols-2 gap-4"><div className="bg-white/5 rounded-xl p-3 border border-white/5"><div className="text-xs text-white/40 uppercase font-bold mb-1">Ra m·∫Øt</div><div className="text-sm font-mono">25/11/2025</div></div><div className="bg-white/5 rounded-xl p-3 border border-white/5"><div className="text-xs text-white/40 uppercase font-bold mb-1">Ph√°t tri·ªÉn b·ªüi</div><div className="text-sm font-bold">Admin & Gemini</div></div><div className="col-span-2 bg-white/5 rounded-xl p-4 border border-white/5"><div className="text-xs text-white/40 uppercase font-bold mb-2">M·ª•c ƒë√≠ch</div><div className="text-sm text-white/80 leading-relaxed font-medium">ƒê√¢y l√† √Ω t∆∞·ªüng c·ªßa tao, ƒë∆∞·ª£c hi·ªán th·ª±c h√≥a b·ªüi Gemini. C√¥ng c·ª• n√†y sinh ra ƒë·ªÉ ph·ª•c v·ª• <span className="text-red-400 font-bold">m·∫•y th·∫±ng con c·∫∑c d√πng k√© Netflix c·ªßa tao</span>, gi√∫p t·ª± ƒë·ªông l·∫•y m√£ x√°c minh v√† c·∫≠p nh·∫≠t h·ªô gia ƒë√¨nh nhanh g·ªçn m√† kh√¥ng c·∫ßn m√≤n m·ªèi ƒë·ª£i tao check mail.</div></div></div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* GUIDE (Order 2 on Mobile -> BELOW INFO, but on Desktop -> BOTTOM LEFT) 
                                           FIX: On desktop we want 2 rows. 
                                           Actually, the user wants "4 khung b·∫±ng nhau".
                                           So left col has Info & Guide. Right col has Tool & Donate.
                                           We make them flex-1 to fill space.
                                        */}
                                        <div className="md:col-span-4 order-2 md:order-3 h-full">
                                            <div className="glass-panel p-6 rounded-[32px] flex-1 flex flex-col justify-center h-full">
                                                <div className="flex items-center gap-3 mb-6 text-blue-400"><div className="p-2 bg-blue-500/10 rounded-lg"><Icon name="book-open" size={20} /></div><h2 className="font-bold text-lg text-white">H∆∞·ªõng d·∫´n</h2></div>
                                                <div className="space-y-8 relative pl-2"><div className="absolute left-[15px] top-2 bottom-2 w-[2px] bg-white/5"></div>{[{icon:'tv',color:'text-blue-400',t:'B∆∞·ªõc 1: G·ª≠i y√™u c·∫ßu',d:'Tr√™n Tivi, ch·ªçn "C·∫≠p nh·∫≠t H·ªô gia ƒë√¨nh" -> "G·ª≠i Email".'},{icon:'loader-2',color:'text-yellow-400',t:'B∆∞·ªõc 2: Ch·ªù h·ªá th·ªëng',d:'Ng·ªìi ƒë·ª£i kho·∫£ng 1 ph√∫t t·∫°i trang n√†y (kh√¥ng c·∫ßn F5).'},{icon:'check-circle-2',color:'text-green-400',t:'B∆∞·ªõc 3: X√°c nh·∫≠n',d:'Khi n√∫t Xanh hi·ªán l√™n, b·∫•m v√†o link -> Ch·ªçn "C√≥, l√† t√¥i".'}].map((s,i)=>(<div key={i} className="relative pl-12"><div className={`absolute left-0 top-0 w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center ${s.color}`}><Icon name={s.icon} size={14} className={s.icon==='loader-2'?'animate-spin':''} /></div><h3 className="font-semibold text-white text-sm mb-1">{s.t}</h3><p className="text-xs text-white/40 leading-relaxed">{s.d}</p></div>))}</div>
                                            </div>
                                        </div>

                                        {/* RIGHT COLUMN: TOOL + ADMIN/DONATE */}
                                        {/* TOOL (Order 3 Mobile -> Below Guide) */}
                                        <div className="md:col-span-8 order-3 md:order-2 h-full">
                                            <div className="glass-panel p-8 rounded-[32px] flex flex-col justify-center items-center text-center relative overflow-hidden flex-1 h-full min-h-[300px]">
                                                <div className={`absolute inset-0 opacity-20 transition-all duration-1000 bg-gradient-to-br ${isLinkReady ? 'from-blue-600 to-purple-900' : 'from-red-600 to-black'}`}></div>
                                                <div className="relative z-10 w-full max-w-md">
                                                    {!isDataLoaded ? (<div className="flex flex-col items-center justify-center"><Icon name="loader-2" className="animate-spin text-white/30" size={32} /><p className="text-white/30 text-sm mt-4 font-mono">ƒêang ƒë·ªìng b·ªô d·ªØ li·ªáu...</p></div>) : (
                                                        <>
                                                            <div className={`inline-flex items-center gap-2 px-4 py-2 rounded-full border text-xs font-bold uppercase tracking-wider shadow-lg mb-6 ${isLinkReady ? 'bg-blue-500/20 border-blue-500/30 text-blue-300' : 'bg-green-500/10 border-green-500/20 text-green-400 shadow-[0_0_20px_rgba(74,222,128,0.1)]'}`}><Icon name={isLinkReady?'zap':'shield-check'} size={14} className={isLinkReady?'fill-blue-300 animate-pulse':'text-green-400'} />{isLinkReady?'Link Ready':'System Active'}</div>
                                                            {isLinkReady ? (<div className="animate-enter"><div className="bg-[#0a0a0a] border border-blue-500/30 rounded-2xl p-1 pl-4 flex items-center gap-4 mb-6 shadow-2xl shadow-blue-900/20"><Icon name="key" className="text-blue-400 shrink-0" size={20} /><div className="flex-1 truncate text-left"><div className="text-[10px] text-blue-500/50 font-bold uppercase tracking-wider">Secure Link</div><div className="text-sm text-blue-100 font-mono w-full whitespace-nowrap overflow-x-auto pb-1 scrollbar-hide">{data.verificationLink}</div></div><button onClick={handleCopy} className="p-3 bg-white/10 hover:bg-white/20 rounded-xl text-white transition-colors flex-shrink-0"><Icon name="copy" size={18} /></button></div><a href={data.verificationLink} target="_blank" className="block w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-2xl shadow-[0_0_40px_rgba(37,99,235,0.4)] hover:shadow-[0_0_60px_rgba(37,99,235,0.6)] transition-all active:scale-[0.98] flex items-center justify-center gap-2"><Icon name="external-link" size={20} /> M·ªü Link X√°c Minh</a></div>) : (
                                                                <div className={`py-12 px-6 border-2 border-dashed rounded-3xl flex flex-col items-center justify-center w-full ${isLinkExpired&&data.type==='link_ready'?'border-yellow-500/30 bg-yellow-500/5':'border-white/10 bg-white/5'}`}>
                                                                    <div className={`mb-4 p-4 rounded-full ${isLinkExpired&&data.type==='link_ready'?'bg-yellow-500/10 text-yellow-500':'bg-white/5 text-white/20'}`}><Icon name={isLinkExpired&&data.type==='link_ready'?'alert-triangle':'lock'} size={32} /></div>
                                                                    <h3 className="text-white/60 font-bold text-xl mb-2">{isLinkExpired&&data.type==='link_ready'?"Link ƒë√£ h·∫øt h·∫°n":"ƒêang ch·ªù li√™n k·∫øt..."}</h3>
                                                                    <p className="text-white/40 text-sm max-w-xs mx-auto leading-relaxed">{isLinkExpired&&data.type==='link_ready'?"Vui l√≤ng l√†m theo h∆∞·ªõng d·∫´n ƒë·ªÉ g·ª≠i mail x√°c minh m·ªõi.":"H·ªá th·ªëng ƒëang qu√©t mail..."}</p>
                                                                </div>
                                                            )}
                                                            <div className="mt-6 flex items-center justify-center gap-2 text-xs text-white/30 font-mono"><Icon name="refresh-cw" size={12} className={!isLinkReady?'animate-spin':''} /> C·∫≠p nh·∫≠t: {formatTime(data.updatedAt)}</div>
                                                        </>
                                                    )}
                                                </div>
                                            </div>
                                        </div>

                                        {/* ADMIN & DONATE (Order 4 Mobile -> Bottom) */}
                                        <div className="md:col-span-8 order-4 md:order-4 h-full">
                                            <div className="glass-panel p-8 rounded-[32px] flex flex-col gap-6 relative overflow-hidden group h-full justify-between">
                                                <div className="absolute top-0 right-0 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none group-hover:bg-pink-500/20 transition-colors duration-700"></div>
                                                <div className="absolute bottom-0 left-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl -ml-32 -mb-32 pointer-events-none group-hover:bg-purple-500/20 transition-colors duration-700"></div>
                                                
                                                {/* ADMIN TOP */}
                                                <div className="flex flex-col items-start gap-4 relative z-10 w-full">
                                                    <div className="flex items-center gap-4"><div className="w-16 h-16 rounded-full p-[2px] bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500 shrink-0"><img src="https://ui-avatars.com/api/?name=Admin&background=random" className="w-full h-full rounded-full object-cover border-2 border-black" /></div><div><div className="text-xs font-bold text-white/40 uppercase tracking-widest mb-1">Admin</div><h3 className="font-bold text-white text-xl">Netflix Access Hub</h3></div></div>
                                                    <div className="bg-white/5 border border-white/10 rounded-2xl p-4 w-full relative"><Icon name="quote" size={24} className="text-white/20 absolute top-2 right-2" /><p className="text-white/80 italic font-medium">"Chia s·∫ª l√† ni·ªÅm vui, donate l√† ƒë·ªông l·ª±c. C·∫£m ∆°n c√°c b·∫°n ƒë√£ ƒë·ªìng h√†nh!"</p></div>
                                                </div>
                                                
                                                {/* DONATE BOTTOM */}
                                                <div className="flex flex-col gap-5 w-full relative z-10 border-t border-white/10 pt-6">
                                                    <div className="flex items-center gap-4 justify-start w-full">
                                                        <div className="w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl flex items-center justify-center shadow-lg shadow-pink-500/20 shrink-0"><Icon name="heart" className="text-white fill-white w-6 h-6" /></div>
                                                        <div className="text-left"><h3 className="font-bold text-white text-lg leading-tight">·ª¶ng h·ªô t√°c gi·∫£</h3><p className="text-xs text-white/40 mt-0.5">Duy tr√¨ server ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh 24/7</p></div>
                                                    </div>
                                                    <div className="flex flex-col sm:flex-row gap-4 w-full"><div className="flex-1 bg-[#a50064] border border-white/10 rounded-2xl p-4 flex items-center gap-4 shadow-lg hover:shadow-pink-500/20 hover:-translate-y-1 transition-all cursor-default min-w-[200px]"><div className="bg-white rounded-xl p-1.5 w-12 h-12 flex items-center justify-center shrink-0"><img src="https://upload.wikimedia.org/wikipedia/vi/f/fe/MoMo_Logo.png" className="w-full h-full object-contain" /></div><div><div className="text-[10px] text-white/60 uppercase font-bold tracking-wider mb-0.5">MOMO</div><div className="text-base font-mono text-white font-bold tracking-wide">090xxxxxxx</div></div></div><div className="flex-1 bg-[#10069f] border border-white/10 rounded-2xl p-4 flex items-center gap-4 shadow-lg hover:shadow-blue-500/20 hover:-translate-y-1 transition-all cursor-default min-w-[200px]"><div className="bg-white rounded-xl p-1.5 w-12 h-12 flex items-center justify-center shrink-0"><img src="https://upload.wikimedia.org/wikipedia/commons/2/25/Logo_MB_new.png" className="w-full h-full object-contain" /></div><div><div className="text-[10px] text-white/60 uppercase font-bold tracking-wider mb-0.5">MB BANK</div><div className="text-base font-mono text-white font-bold tracking-wide">123456789</div></div></div></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'events' && (
                                    <div className="animate-enter pb-12"><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">{UPCOMING_EVENTS.sort((a,b)=>new Date(a.date)-new Date(b.date)).map(event => <EventCard key={event.id} event={event} isHero={UPCOMING_EVENTS.indexOf(event)===0} />)}</div></div>
                                )}

                                {activeTab === 'blog' && (
                                    <div className="max-w-md mx-auto animate-enter pb-12">
                                        <h2 className="text-2xl font-bold text-center mb-8">B·∫£ng Tin</h2>
                                        {posts.map(post => <InstaPost key={post.id} {...post} onLike={() => handleLike(post.id)} />)}
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                    
                    {/* COPYRIGHT */}
                    <div className="text-center text-white/20 text-xs py-8 relative z-10">Copyright ¬© 2025 Netflix Access Hub. All rights reserved.</div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
